<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<title>08-data-visualization.html</title>
<meta http-equiv="Content-Type" content="application/xhtml+xml;charset=utf-8"/>
<link rel="stylesheet" type="text/css" media="all" href="https://cdn.jsdelivr.net/npm/github-markdown-css/github-markdown.min.css"  />
<link rel="stylesheet" type="text/css" media="all" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release/build/styles/github.min.css"  /><meta name='viewport' content='width=device-width, initial-scale=1, shrink-to-fit=no'><style> body { box-sizing: border-box; max-width: 740px; width: 100%; margin: 40px auto; padding: 0 10px; } </style><script id='MathJax-script' async src='https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js'></script><script src='https://cdn.jsdelivr.net/gh/highlightjs/cdn-release/build/highlight.min.js'></script><script>document.addEventListener('DOMContentLoaded', () => { document.body.classList.add('markdown-body'); document.querySelectorAll('pre[lang] > code').forEach((code) => { code.classList.add(code.parentElement.lang); }); document.querySelectorAll('pre > code').forEach((code) => { hljs.highlightBlock(code); }); });</script>
</head>

<body>

<h1 id="data-visualization">Data Visualization</h1>
<p><code>{r dataviz_setup, include=F} knitr::opts_chunk$set(dev = "svg",                       fig.align = "center")</code></p>
<p>Look at your data!</p>
<p>Yes, that means look at your raw data by producing subsets, printing to the console, and all the other things we’ve been doing. But it also means that we should visualize our data.</p>
<p>The potential purposes for doing so are legion, but we can name a few for starters:</p>
<ul>
<li>To detect errors (e.g., miscoded observations)</li>
<li>To detect missing data</li>
<li>To detect your own coding errors (e.g., miscoded derivative variables)</li>
<li>To see the variation of single variables and the covariation between pairs of variables</li>
<li>To summarize a lot of quantitative information so that it can be digested by the reader quickly and efficiently</li>
<li>To reveal relationships between exposure and outcome</li>
<li>To diagnose statistical or computational procedures (e.g., regressions, algorithms)</li>
<li>To make principled decisions about how to analyze your data</li>
</ul>
<p>Before we continue, though, we should keep one thing in mind: <strong>data visualization is not about making pretty pictures</strong>. Saying so does not discount the importance of aesthetics in your visualizations. However, the aesthetics you employ should be chosen to make the message of the figure clear to your audience. In some cases, we might want to highlight a particular contrast between two variables. In others, we might want to visualize how a particular variable trends over time. In yet others, we may simply want to visualize features in our raw dataset.</p>
<p>Each of these objectives implies the usefulness of certain visualizations and the impropriety of others. In other words, we want the purpose of the visualization to dictate the means by which we display relevant data.</p>
<p>In this introduction, we will focus on a couple of broad concepts and code examples in order to get you up and running as quickly as possible. However, I highly recommend two (freely available) resources in particular:</p>
<ol type="1">
<li><p><a href="https://socviz.co/">Data Visualization: A Practical Introduction</a> by Kieran Healy</p></li>
<li><p><a href="http://r-statistics.co/Top50-Ggplot2-Visualizations-MasterList-R-Code.html">Top 50 ggplot2 Visualizations - The Master List (with Full R Code)</a> by Selva Prabhakaran</p></li>
</ol>
<p>Keeping these bookmarked will probably cover about 90%<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a> of your data visualization needs.</p>
<h2 id="base-r-examples">Base R examples</h2>
<p>You may find that working with plotting in base R is more efficient when you want quick-and-dirty visualizations—for instance, while you’re conducting exploratory data analysis.</p>
<h3 id="boxplots">Boxplots</h3>
<p><code>{r base-r-bp, out.width="75%"} # using built-in iris dataset boxplot(iris$Petal.Width) boxplot(Petal.Width ~ Species, data = iris)</code></p>
<h3 id="density-plots">Density Plots</h3>
<p><code>{r base-r-density, out.width="75%"} plot(density(iris$Petal.Width))</code></p>
<h3 id="scatterplots">Scatterplots</h3>
<p>```{r base-r-scatter, out.width=“75%”} plot(iris$Petal.Width)</p>
<p>plot(Petal.Width ~ Petal.Length, data = iris) ```</p>
<h3 id="scatterplot-matrix">Scatterplot Matrix</h3>
<p><code>{r base-r-scattermatrix, out.width="100%", fig.asp=1} pairs(iris)</code></p>
<h3 id="histograms">Histograms</h3>
<p><code>{r base-r-hist, out.width="75%"} hist(iris$Petal.Width)</code></p>
<h3 id="linear-regression-diagnostics">Linear regression diagnostics</h3>
<p>Base R and some packages provide built-in plotting methods for certain types of objects. Here, feeding an object of the class <code>lm</code> will return a series of linear regression diagnostics.</p>
<p>```{r base-linear-reg-diag, out.width=“85%”} ## run a regression on built-in dataset ChickWeight fit &lt;- lm(weight ~ Diet, data = ChickWeight) class(fit)</p>
<p>plot(fit) ```</p>
<p>If you run <code>plot(fit)</code> as above, you might find R irritating in that it will print these plots to your image device (image pane in RStudio) in succession, leaving you to flip between images. For a nicer output, you can output a grid of regression diagnostics.</p>
<p>`<code>{r base-linear-reg-diag-grid, out.width="85%", fig.asp=1} par(mfrow = c(2, 2)) plot(fit)</code> `</p>
<h2 id="ggplot2-examples">ggplot2 examples</h2>
<p>The <code>ggplot2</code> package in R is an excellent package for data visualization based on the <em>grammar of graphics</em> concept.<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a> The basic idea is to divide plot features into conceptual layers defined by their function in the visualization. Here’s a general example:</p>
<section class="footnotes">
<hr />
<ol>
<li id="fn1"><p>Source: Thin air<a href="#fnref1" class="footnote-back">↩</a></p></li>
<li id="fn2"><p>Leland Wilkinson. <a href="https://link.springer.com/book/10.1007/0-387-28695-0">The Grammar of Graphics</a>. Springer, 2005.<a href="#fnref2" class="footnote-back">↩</a></p></li>
</ol>
</section>

</body>
</html>
